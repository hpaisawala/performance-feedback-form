<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Employee Performance Feedback Form</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#1e3a8a"
          }
        }
      }
    }
  </script>
</head>

<body class="bg-gray-100 min-h-screen py-8 px-4 font-sans text-gray-800">

<div class="max-w-4xl mx-auto bg-white rounded-lg shadow-xl border-t-4 border-primary">

  <!-- Header -->
  <div class="p-8 bg-gray-50 border-b flex justify-between items-center">
    <div>
      <h1 class="text-2xl font-bold text-primary uppercase">
        Employee Performance Feedback Form
      </h1>
      <p class="text-sm text-red-600 font-semibold mt-1">
        <i class="fas fa-lock mr-1"></i> CONFIDENTIAL DOCUMENT
      </p>
    </div>
    <div id="statusIndicator" class="hidden text-green-600 text-sm bg-green-50 px-3 py-1 rounded border border-green-200">
      <i class="fas fa-check-circle mr-1"></i> Draft Saved
    </div>
  </div>

  <!-- FORM -->
  <form id="appraisalForm" class="p-8 space-y-10" novalidate>

    <!-- Part 1 -->
    <section>
      <h2 class="font-bold text-lg border-b pb-2 mb-4">Part 1: Employee Information</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <input required name="Employee Name" placeholder="Employee Name" class="p-3 border rounded"/>
        <input required name="Manager Name" placeholder="Reporting Manager" class="p-3 border rounded"/>
      </div>
    </section>

    <!-- Part 2 -->
    <section>
      <h2 class="font-bold text-lg border-b pb-2 mb-4">Part 2: Core Attributes</h2>
      <div class="space-y-4">
        <label>Quality</label>
        <div class="flex gap-4">
          <input type="radio" name="Quality" value="1">1
          <input type="radio" name="Quality" value="2">2
          <input type="radio" name="Quality" value="3">3
          <input type="radio" name="Quality" value="4">4
          <input type="radio" name="Quality" value="5">5
        </div>

        <label>Quantity</label>
        <div class="flex gap-4">
          <input type="radio" name="Quantity" value="1">1
          <input type="radio" name="Quantity" value="2">2
          <input type="radio" name="Quantity" value="3">3
          <input type="radio" name="Quantity" value="4">4
          <input type="radio" name="Quantity" value="5">5
        </div>

        <label>Timeliness</label>
        <div class="flex gap-4">
          <input type="radio" name="Timeliness" value="1">1
          <input type="radio" name="Timeliness" value="2">2
          <input type="radio" name="Timeliness" value="3">3
          <input type="radio" name="Timeliness" value="4">4
          <input type="radio" name="Timeliness" value="5">5
        </div>
      </div>
    </section>

    <!-- Part 3 -->
    <section>
      <h2 class="font-bold text-lg border-b pb-2 mb-4">Part 3: Values</h2>
      <label>Integrity</label>
      <div class="flex gap-4">
        <input type="radio" name="Integrity" value="1">1
        <input type="radio" name="Integrity" value="2">2
        <input type="radio" name="Integrity" value="3">3
        <input type="radio" name="Integrity" value="4">4
        <input type="radio" name="Integrity" value="5">5
      </div>
    </section>

    <!-- Part 4 -->
    <section>
      <h2 class="font-bold text-lg border-b pb-2 mb-4">Part 4: Feedback</h2>
      <textarea name="Strengths" rows="3" class="w-full p-3 border rounded" placeholder="Strengths"></textarea>
      <textarea name="Improvements" rows="3" class="w-full p-3 border rounded mt-4" placeholder="Improvements"></textarea>
    </section>

    <!-- Part 5 -->
    <section>
      <h2 class="font-bold text-lg border-b pb-2 mb-4">Part 5: Potential & Goals</h2>
      <div class="space-y-2">
        <input type="radio" name="Potential" value="Promotion Ready"> Promotion Ready<br/>
        <input type="radio" name="Potential" value="Well Placed"> Well Placed<br/>
        <input type="radio" name="Potential" value="Requires Development"> Requires Development
      </div>

      <input name="Goal 1" placeholder="Goal 1" class="w-full p-3 border rounded mt-4"/>
      <input name="Goal 2" placeholder="Goal 2" class="w-full p-3 border rounded mt-2"/>
      <input name="Goal 3" placeholder="Goal 3" class="w-full p-3 border rounded mt-2"/>
    </section>

    <!-- Part 6 -->
    <section>
      <h2 class="font-bold text-lg border-b pb-2 mb-4">Final Summary</h2>
      <textarea name="Summary" rows="4" class="w-full p-3 border rounded"></textarea>
    </section>

    <!-- Actions -->
    <div class="flex justify-between border-t pt-6">
      <button type="button" onclick="form.reset()" class="text-gray-600">
        Clear Form
      </button>
      <button id="submitBtn" class="bg-primary text-white px-6 py-3 rounded font-bold">
        Submit Evaluation
      </button>
    </div>

  </form>
</div>

<!-- Success Modal -->
<div id="successOverlay" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center">
  <div class="bg-white p-8 rounded-lg text-center shadow-lg">
    <i class="fas fa-check-circle text-4xl text-green-500 mb-4"></i>
    <h3 class="text-xl font-bold mb-2">Submission Successful</h3>
    <button onclick="closeSuccess()" class="bg-primary text-white px-6 py-2 rounded">
      Close
    </button>
  </div>
</div>

<script>
const ENDPOINT = "https://script.google.com/macros/s/AKfycbzIV9ZKrnLXkj20a1-pJaTWkwnXJ_xL_dfBRjUrRZtMUTg2knxfDUm5HeMAmoe0cScOCw/exec";
const form = document.getElementById("appraisalForm");
const btn = document.getElementById("submitBtn");

form.addEventListener("submit", async e => {
  e.preventDefault();
  btn.disabled = true;
  btn.innerHTML = "Submitting...";

  try {
    const data = new URLSearchParams(new FormData(form));
    const res = await fetch(ENDPOINT, {
      method: "POST",
      headers: { "Content-Type": "application/x-www-form-urlencoded" },
      body: data
    });

    const json = await res.json();
    if (json.result !== "success") throw new Error(json.message);

    document.getElementById("successOverlay").classList.remove("hidden");
    form.reset();
  } catch (err) {
    alert("Submission failed. Please try again.");
    console.error(err);
  } finally {
    btn.disabled = false;
    btn.innerHTML = "Submit Evaluation";
  }
});

function closeSuccess() {
  document.getElementById("successOverlay").classList.add("hidden");
}
</script>

</body>
</html>
